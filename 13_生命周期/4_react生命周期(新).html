<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>react生命周期(新)</title>
	</head>
	<body>
		<!-- 准备好一个容器-->
		<div id="test"></div>

		<!-- 引入react核心库 -->
		<script type="text/javascript" src="../js/17.0.1/react.development.js"></script>
		<!-- 引入react-dom，用于支持react操作DOM -->
		<script type="text/javascript" src="../js/17.0.1/react-dom.development.js"></script>
		<!-- 引入babel，用于将jsx转为js -->
		<script type="text/javascript" src="../js/17.0.1/babel.min.js"></script>

		<script type="text/babel"> 

			//定义组件
			class Sum extends React.Component{

				//构造器----调1次
				constructor(){
					console.log('---constructor---');
					super()
					this.state = {count:0}
				}

				//加1的回调
				add = ()=>{
					const {count} = this.state
					this.setState({count:count+1})
				}

				//卸载的回调
				death = ()=>{
					ReactDOM.unmountComponentAtNode(document.getElementById('test'))
				}

				//强制更新的回调
				force = ()=>{
					this.forceUpdate()
				}

				//组件将要挂载---调1次
				UNSAFE_componentWillMount(){
					console.log('---componentWillMount---');
				}

				//组件挂载完毕---调1次
				componentDidMount(){
					console.log('---componentDidMount---');
				}

				//组件将要卸载---调1次
				componentWillUnmount(){
					console.log('---componentWillUnmount---');
				}
				
				//组件更新的“阀门”
				shouldComponentUpdate(){
					console.log('---shouldComponentUpdate---');
					return true
				}

				//组件将要更新----调用n次，n是更新的次数
				UNSAFE_componentWillUpdate(){
					console.log('---componentWillUpdate---');
				}

				//组件更新完毕----调用n次，n是更新的次数
				componentDidUpdate(){
					console.log('---componentDidUpdate----');
				}

				UNSAFE_componentWillReceiveProps(){
					console.log('---componentWillReceiveProps---');
				}
				
				//组件初次渲染+更新---调1+n次
				render(){
					console.log('---render---');
					return(
						<div>
							<h2>当前求和为：{this.state.count}</h2>
							<button onClick={this.add}>点我+1</button>
							<button onClick={this.death}>卸载组件</button>
							<button onClick={this.force}>强制更新一下</button>
						</div>
					)
				}
			}
			
			//渲染组件
			ReactDOM.render(<Sum/>,document.getElementById('test'))
		</script>
	</body>
</html>